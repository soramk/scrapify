# **プロジェクト概要**

指定したWebページのURLからメインコンテンツを抽出し、LLMのRAG（検索拡張生成）システムに最適な「Markdown形式」および「チャンク（分割）データ」に変換する静的Webアプリケーション。

## **1\. 機能要件**

### **1.1 データ取得機能**

* ユーザーが入力したURLをもとにWebページのHTMLを取得する。  
* ブラウザからの直接取得によるCORSエラーを回避するため、パブリックCORSプロキシ（例: <https://api.codetabs.com/v1/proxy?quest=）を経由してHTMLを取得する。>  
* 取得中のローディング状態、および取得失敗時のエラーメッセージをUIに表示する。

### **1.2 メインコンテンツ抽出機能**

* 取得したHTMLからRAGに不要な要素（\<nav\>, \<footer\>, \<header\>, \<aside\>, \<script\>, \<style\>, \<svg\>, button 等）を除外する。  
* \<main\>, \<article\>, .md-content, .theme-doc-markdown などのセレクタを優先的に探し、ページの中核となるコンテンツのみを抽出対象とする。

### **1.3 Markdown変換機能（カスタムパーサー）**

* 抽出したHTMLノードを再帰的に解析し、以下のMarkdownフォーマットに変換する。  
  * **見出し**: \<h1\>〜\<h6\> を \#〜\#\#\#\#\#\# に変換。  
  * **テキスト/リスト**: \<p\>, \<ul\>, \<ol\>, \<li\> などを適切なMarkdown構文に変換。太字（\<b\>, \<strong\>）にも対応。  
  * **テーブル (Table)**:  
    * |---|---| のようなMarkdownテーブル構文に変換する。  
    * テーブル内の改行はレイアウト崩れを防ぐため半角スペースに置換する。  
    * セル内のパイプ記号 | はエスケープ（\\|）する。  
  * **コードブロック (Pre/Code)**:  
    * インデント（空白）を保持したまま \`\`\` で囲む。  
    * DocusaurusやPrism.jsなどのシンタックスハイライトで「行」が \<span\> 等で分割されている場合（token-lineクラス等）、正しく改行を復元・補完してワンライナーになるのを防ぐ。  
    * コードハイライト用のレイアウトテーブル（行番号付きなど）は、テーブルとしてではなくコードブロックとして処理する。

### **1.4 チャンク分割プレビュー機能**

* 生成したMarkdownテキストを、RAGのベクトル化に適した単位（H1またはH2見出し）で分割する。  
* 分割されたチャンクのリストと、それぞれの文字数をUI上で確認できる。  
* 短すぎるチャンク（例: 20文字未満）はノイズとして除外する。

### **1.5 エクスポート機能**

* **クリップボードへのコピー**: 生成したMarkdown、またはチャンク化されたテキスト群をクリップボードにコピーする。  
* **ファイルダウンロード**: extracted\_data.md または rag\_chunks.txt としてローカルに保存する。

## **2\. 非機能要件・技術スタック**

* **フロントエンド・フレームワーク**: React (Vite推​​奨)  
* **スタイリング**: Tailwind CSS  
* **アイコン**: Lucide React  
* **動作環境**: ブラウザ上で完全に動作するSPA（Single Page Application）。バックエンドサーバーは不要（プロキシAPIに依存）。

## **3\. GitHub Pages 公開・デプロイ要件**

本アプリケーションをGitHub Pagesで静的ホスティングするための要件。

### **3.1 パス設定 (Base URL)**

* リポジトリ名を含むサブディレクトリでのホスティングに対応するため、ビルドツールのベースURL設定を行うこと。  
* Viteを使用する場合、vite.config.js に base: '/リポジトリ名/' を設定する。

### **3.2 ルーティング制約**

* 今回は単一の画面で完結するため問題ないが、もし今後React Router等を導入する場合は、GitHub Pagesの仕様（直接URLアクセス時の404エラー）を考慮し HashRouter を使用するか、404.htmlのリダイレクトハックを使用すること。

### **3.3 デプロイパイプライン (GitHub Actions)**

* main ブランチへのPushをトリガーに、自動でビルドおよびGitHub Pages環境へのデプロイを行うGitHub Actionsワークフロー（.github/workflows/deploy.yml）を構築すること。  
* （または、手動運用の場合は gh-pages パッケージのスクリプトを package.json に定義すること）。
